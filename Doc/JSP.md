[TOC]



## JSP

#### 一. 介绍

+ JSP是sun公司提供的一种规范
+ JSP规范用于封装响应对象简化将Servlet处理结果写入到响应体开发难度

#### 二. 响应对象使用中的问题

+ 手动设置响应头content-type
+ 手动索要一个输出流对象
+ 手动将结果写入到响应体

#### 三. JSP的优势

>开发人员只需要考虑哪些内容需要写入到响应体中，不需要考虑写入到相应包中的过程
>
>JSP文件【运行时】自动将文件内部所有与JAVA命令无关的内容自动写入到响应体中

#### 四. JSP文件中JAVA命令书写规范

1. 执行标签

   1) 格式：<%

   ​					-------------------------------Java命令行----------------------------------

   ​				%>

   2) 作用：用于提示【JSP文件】在运行时不要将执行标签中的Java命令写入到响应体，通知JSP文				件在运行时需要将执行标签中的内容执行完毕后再做输出。

   3) Java命令行： 

   ​			声明变量、声明运算表达式（数学、关系运算、逻辑运算）、声明控制语句和循环语句

2. 输出标签

   1) 格式：<%=变量名%>  <%=运算表达式%>

   2) 作用： 在JSP文件运行时，通知JSP将指定变量内容或运算表达式结果写入到响应体中

#### 五. Jsp文件中的内置对象 （共九个，常用三个）

1. ServletContext                ----- applicatoin (全局作用域对象)
2. HttpSession                     ----- session (私人储物柜)
3. HttpServletRequest        ----- request

#### 六. Servlet与Jsp文件之间关系

+ Servlet：接受请求并处理请求，但是Servlet不负责将处理结果返回  

+ Jsp： 不负责处理请求，负责将Servlet生成的处理结果写入到响应体中

+ Servlet与Jsp之间的调用关系

  >浏览器  ---- 》 Servlet（处理请求） ----请求转发----》Jsp ----》处理结果写入到响应体中

+ Servlet与Jsp之间如何共享数据： 借助于Request

#### 七. Jsp运行原理  :red_circle:

>Jsp文件既不是静态资源也不是动态资源文件，Jsp文件不能被编译也不能被调用执行

运行原理：

1. Tomcat接收到调用Jsp文件请求时，将被访问jsp【编辑】为Java文件
2. Tomcat调用JVM将java文件编译为class文件（该class文件是一个Servlet接口实现类）
3. Tomcat通过反射机制生成这个class文件的实例对象
4. Tomcat通过实例对象调用_jspService方法，这个方法在运行时负责通过输出流将jsp文件内容写入到响应体中。

































